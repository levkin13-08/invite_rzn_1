<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>RSVP ‚Äî –ê–ª–µ–∫—Å–∞–Ω–¥—Ä & –ò—Ä–∏–Ω–∞</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@300;400;500&family=Parisienne&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#fbf8f2;
      --paper:rgba(255,255,255,.82);
      --ink:#1c1c1c;
      --muted:#7c7c7c;
      --line:rgba(0,0,0,.09);
      --soft:rgba(0,0,0,.055);
      --shadow:0 14px 44px rgba(0,0,0,.06);
      --radius:22px;
      --max: 740px;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      background: radial-gradient(900px 540px at 10% 10%, rgba(0,0,0,.028), transparent 55%), var(--bg);
      color:var(--ink);
      font-family:"Cormorant Garamond", serif;
    }
    .wrap{ max-width:var(--max); margin:0 auto; padding:28px 16px 70px; }
    .card{
      background:var(--paper);
      border:1px solid var(--soft);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(7px);
    }

    input, select, textarea{ font-size:16px; }
    .top{
      display:flex; justify-content:space-between; align-items:center;
      padding:16px 20px;
      border-bottom:1px solid var(--soft);
    }
    .brand{ font-family:"Parisienne", cursive; font-size:26px; }
    .top a{
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      font-size:11px;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:var(--muted);
      text-decoration:none;
      padding:10px 12px;
      border:1px solid var(--soft);
      border-radius:999px;
      background:rgba(255,255,255,.55);
    }
    .top a:hover{ background:#fff; color:var(--ink); }

    .body{ padding:26px 22px 28px; }
    h1{ margin:0; font-size:36px; font-weight:500; line-height:1.05; }
    .sub{ margin:10px 0 0; color:var(--muted); font-size:15px; line-height:1.75; }

    .block{ margin-top:18px; padding-top:16px; border-top:1px solid var(--soft); }
    .tag{
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      font-size:10px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:var(--muted);
      margin-bottom:10px;
    }

    label{
      display:block;
      margin:12px 0 6px;
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      font-size:10px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:var(--muted);
    }
    input, select, textarea{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--soft);
      background:#fff;
      color:var(--ink);
      outline:none;
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      font-size:14px;
    }
    textarea{ min-height:92px; resize:vertical; }

    .btn{
      width:100%;
      margin-top:14px;
      padding:12px 14px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.55);
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      font-size:11px;
      letter-spacing:.18em;
      text-transform:uppercase;
      cursor:pointer;
    }
    .btn:hover{ background:#fff; }
    .btn:disabled{ opacity:.6; cursor:not-allowed; }

    .inlineBtns{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    .inlineBtns .btn{ width:auto; margin-top:0; }

@media (max-width: 560px){
  .body{ padding: 18px 14px 22px; }
  h1{ font-size: 30px; }
  .choiceGrid{ grid-template-columns: 1fr; }
  .inlineBtns .btn{ width: 100%; }
}
    .ok,.err{
      display:none;
      margin-top:12px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--soft);
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      font-size:13px;
      color:var(--muted);
      background:#fff;
    }
    .note{ margin-top:10px; color:var(--muted); font-size:13px; line-height:1.6; }

    /* –†–∞–¥–∏–æ-–∫–Ω–æ–ø–∫–∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ */
.choiceGrid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  margin-top:6px;
}
@media (max-width:520px){ .choiceGrid{ grid-template-columns:1fr; } }

.choice{
  border:1px solid var(--soft);
  border-radius:14px;
  background:rgba(255,255,255,.72);
  padding:12px 12px;
  display:flex;
  align-items:center;
  gap:12px;
  cursor:pointer;
  transition: background .15s ease, border-color .15s ease, transform .15s ease;
}
.choice:hover{
  background:#fff;
  border-color:rgba(0,0,0,.08);
}
.choice:active{ transform: translateY(1px); }

/* –ø—Ä—è—á–µ–º –Ω–∞—Ç–∏–≤–Ω—ã–π input, —Ä–∏—Å—É–µ–º —Å–≤–æ–π */
.choice input{
  position:absolute;
  opacity:0;
  pointer-events:none;
}

.dot{
  width:18px;
  height:18px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,.12);
  background:rgba(0,0,0,.02);
  display:flex;
  align-items:center;
  justify-content:center;
  flex:0 0 18px;
}
.dot::after{
  content:"";
  width:8px;
  height:8px;
  border-radius:999px;
  background:transparent;
}

/* —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Äú–≤—ã–±—Ä–∞–Ω–æ‚Äù */
.choice input:checked + .dot{
  border-color:rgba(0,0,0,.16);
  background:rgba(0,0,0,.04);
}
.choice input:checked + .dot::after{
  background:rgba(0,0,0,.55);
}

.ctext{
  display:flex;
  flex-direction:column;
  gap:2px;
}
.ctitle{
  font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  font-size:13px;
  color:var(--ink);
  letter-spacing:.01em;
}

.choice input[type="checkbox"]:checked + .dot::after{
  background:rgba(28,28,28,.75);
}
.csub{
  font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  font-size:12px;
  color:var(--muted);
  line-height:1.4;}

  /* –ï–¥–∏–Ω—ã–π –Ω–µ–∂–Ω—ã–π –≤—ã–±–æ—Ä (radio/checkbox) */
.choiceGrid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  margin-top:6px;
}
@media (max-width:520px){ .choiceGrid{ grid-template-columns:1fr; } }

.choice{
  border:1px solid var(--soft);
  border-radius:14px;
  background:rgba(255,255,255,.78);
  padding:12px 12px;
  display:flex;
  align-items:flex-start;
  gap:12px;
  cursor:pointer;
  transition: background .15s ease, border-color .15s ease, transform .15s ease;
}
.choice:hover{
  background:#fff;
  border-color:rgba(0,0,0,.08);
}
.choice:active{ transform: translateY(1px); }

/* –°–∫—Ä—ã–≤–∞–µ–º –Ω–∞—Ç–∏–≤–Ω—ã–µ radio/checkbox, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ ‚Äú–∫—Ä—É–∂–∫–æ–≤ —Å–ø—Ä–∞–≤–∞‚Äù */
.choice input{
  position:absolute;
  opacity:0;
  pointer-events:none;
}

/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä */
.dot{
  width:18px;
  height:18px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,.12);
  background:rgba(0,0,0,.02);
  display:flex;
  align-items:center;
  justify-content:center;
  flex:0 0 18px;
  margin-top:2px;
}
.dot::after{
  content:"";
  width:8px;
  height:8px;
  border-radius:999px;
  background:transparent;
}

/* radio checked */
.choice input[type="radio"]:checked + .dot{
  border-color:rgba(0,0,0,.16);
  background:rgba(0,0,0,.04);
}
.choice input[type="radio"]:checked + .dot::after{
  background:rgba(0,0,0,.58);
}

/* checkbox checked (—á—É—Ç—å –ø–ª–æ—Ç–Ω–µ–µ) */
.choice input[type="checkbox"]:checked + .dot{
  border-color:rgba(0,0,0,.18);
  background:rgba(0,0,0,.05);
}
.choice input[type="checkbox"]:checked + .dot::after{
  width:10px;
  height:10px;
  background:rgba(0,0,0,.62);
}

.ctext{ display:flex; flex-direction:column; gap:2px; }
.ctitle{
  font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  font-size:13px;
  color:var(--ink);
  letter-spacing:.01em;
  line-height:1.25;
}
.csub{
  font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  font-size:12px;
  color:var(--muted);
  line-height:1.35;
}

  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <div class="top">
        <div class="brand">Invite</div>
        <a href="index.html">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
      </div>

      <div class="body">
        <h1>–ê–ª–µ–∫—Å–∞–Ω–¥—Ä & –ò—Ä–∏–Ω–∞</h1>
        <p class="sub">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É—á–∞—Å—Ç–∏–µ. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –≥–æ—Å—Ç—è –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë –∏–ª–∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å.</p>

        <!-- –®–∞–≥ 1: –æ—Å–Ω–æ–≤–Ω–æ–π –≥–æ—Å—Ç—å -->
        <div class="block" id="stepMain">
          <div class="tag">–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</div>

          <form id="mainForm">
            <label>–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è *</label>
            <input name="name" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞">

            <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
            <input name="phone" placeholder="+7 ‚Ä¶">

            <label>–í—ã —Å–º–æ–∂–µ—Ç–µ –ø—Ä–∏–π—Ç–∏? *</label>
            <select name="attendance" required>
              <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶</option>
              <option value="yes">–î–∞, –±—É–¥—É</option>
              <option value="no">–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ—Ç</option>
              <option value="maybe">–ü–æ–∫–∞ –Ω–µ —É–≤–µ—Ä–µ–Ω(–∞)</option>
            </select>

<label>–ö–∞–∫ –≤—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –¥–æ–±–∏—Ä–∞—Ç—å—Å—è? *</label>
<div class="choiceGrid" role="radiogroup" aria-label="–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç">
  <label class="choice">
    <input type="radio" name="transport" value="self" required>
    <span class="dot"></span>
    <span class="ctext">
      <span class="ctitle">–°–≤–æ–∏–º —Ö–æ–¥–æ–º</span>
      <span class="csub">–î–æ–±–µ—Ä—É—Å—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ (–º–æ–≥—É –∫–æ–≥–æ-–Ω–∏–±—É–¥—å –∑–∞—Ö–≤–∞—Ç–∏—Ç—å)</span>
    </span>
  </label>

  <label class="choice">
    <input type="radio" name="transport" value="need" required>
    <span class="dot"></span>
    <span class="ctext">
      <span class="ctitle">–ù—É–∂–µ–Ω —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç</span>
      <span class="csub">–ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –ø–æ–ø—É—Ç—á–∏–∫–∞</span>
    </span>
  </label>
</div>
<label>–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ –∞–ª–∫–æ–≥–æ–ª—é</label>

<div class="choiceGrid">

  <label class="choice">
    <input type="checkbox" name="alcohol" value="wine">
    <span class="dot"></span>
    <span class="ctext">
      <span class="ctitle">–í–∏–Ω–æ</span>
      <span class="csub">–ö—Ä–∞—Å–Ω–æ–µ / –±–µ–ª–æ–µ</span>
    </span>
  </label>

  <label class="choice">
    <input type="checkbox" name="alcohol" value="champagne">
    <span class="dot"></span>
    <span class="ctext">
      <span class="ctitle">–®–∞–º–ø–∞–Ω—Å–∫–æ–µ</span>
    </span>
  </label>

  <label class="choice">
    <input type="checkbox" name="alcohol" value="strong">
    <span class="dot"></span>
    <span class="ctext">
      <span class="ctitle">–ö—Ä–µ–ø–∫–∏–π –∞–ª–∫–æ–≥–æ–ª—å</span>
    </span>
  </label>

  <label class="choice">
    <input type="checkbox" name="alcohol" value="no">
    <span class="dot"></span>
    <span class="ctext">
      <span class="ctitle">–ù–µ —É–ø–æ—Ç—Ä–µ–±–ª—è—é</span>
    </span>
  </label>

</div>

            <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π / –ø–æ–∂–µ–ª–∞–Ω–∏—è</label>
            <textarea name="comment" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –∞–ª–ª–µ—Ä–≥–∏–∏, –ø–∏—Ç–∞–Ω–∏–µ, –≤–æ–ø—Ä–æ—Å—ã‚Ä¶"></textarea>

            <button class="btn" id="mainSendBtn" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            <div class="ok" id="mainOk">–°–ø–∞—Å–∏–±–æ! –û—Ç–≤–µ—Ç –∑–∞–ø–∏—Å–∞–Ω.</div>
            <div class="err" id="mainErr">–ù–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SCRIPT_URL –∏ –¥–æ—Å—Ç—É–ø –¥–µ–ø–ª–æ—è.</div>

            <div class="note">–û—Ç–ø—Ä–∞–≤–ª—è—è —Ñ–æ—Ä–º—É, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è.</div>
          </form>
        </div>

        <!-- –®–∞–≥ 2: —Å–ø—Ä–æ—Å–∏—Ç—å, –¥–æ–±–∞–≤–∏—Ç—å –≥–æ—Å—Ç—è? -->
        <div class="block" id="stepAsk" style="display:none;">
          <div class="tag">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥–æ—Å—Ç–∏</div>
          <p class="sub" style="margin:0;">–î–æ–±–∞–≤–∏—Ç—å –µ—â—ë –æ–¥–Ω–æ–≥–æ –≥–æ—Å—Ç—è?</p>
          <div class="inlineBtns">
            <button class="btn" id="addGuestBtn" type="button">–î–∞, –¥–æ–±–∞–≤–∏—Ç—å –≥–æ—Å—Ç—è</button>
            <button class="btn" id="finishBtn1" type="button">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
          </div>
        </div>

        <!-- –®–∞–≥ 3: —Ñ–æ—Ä–º–∞ –≥–æ—Å—Ç—è (–ø–æ–≤—Ç–æ—Ä—è–µ–º–∞—è) -->
        <div class="block" id="stepGuest" style="display:none;">
          <div class="tag" id="guestTag">–ì–æ—Å—Ç—å</div>

          <form id="guestForm">
            <label>–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è –≥–æ—Å—Ç—è *</label>
            <input name="name" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤">

            <label>–¢–µ–ª–µ—Ñ–æ–Ω (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)</label>
            <input name="phone" placeholder="+7 ‚Ä¶">

            <label>–ì–æ—Å—Ç—å —Å–º–æ–∂–µ—Ç –ø—Ä–∏–π—Ç–∏? *</label>
            <select name="attendance" required>
              <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶</option>
              <option value="yes">–î–∞</option>
              <option value="no">–ù–µ—Ç</option>
              <option value="maybe">–ü–æ–∫–∞ –Ω–µ —É–≤–µ—Ä–µ–Ω(–∞)</option>
            </select>

            <label>–ö–∞–∫ –≥–æ—Å—Ç—å –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –¥–æ–±–∏—Ä–∞—Ç—å—Å—è? *</label>
<div class="choiceGrid" role="radiogroup" aria-label="–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≥–æ—Å—Ç—è">
  <label class="choice">
    <input type="radio" name="transport" value="self" required>
    <span class="dot"></span>
    <span class="ctext">
      <span class="ctitle">–°–≤–æ–∏–º —Ö–æ–¥–æ–º</span>
      <span class="csub">–î–æ–±–µ—Ä—ë—Ç—Å—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ</span>
    </span>
  </label>

  <label class="choice">
    <input type="radio" name="transport" value="need" required>
    <span class="dot"></span>
    <span class="ctext">
      <span class="ctitle">–ù—É–∂–µ–Ω —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç</span>
      <span class="csub">–ù—É–∂–µ–Ω —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä/–ø–æ–¥–≤–æ–∑</span>
    </span>
  </label>
</div>
<label>–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ –∞–ª–∫–æ–≥–æ–ª—é</label>
<div class="choiceGrid" aria-label="–ê–ª–∫–æ–≥–æ–ª—å">
  <label class="choice">
    <input type="checkbox" name="alcohol" value="wine">
    <span class="dot"></span>
    <span class="ctext">
      <span class="ctitle">–í–∏–Ω–æ</span>
      <span class="csub">–ö—Ä–∞—Å–Ω–æ–µ / –±–µ–ª–æ–µ</span>
    </span>
  </label>

  <label class="choice">
    <input type="checkbox" name="alcohol" value="champagne">
    <span class="dot"></span>
    <span class="ctext">
      <span class="ctitle">–®–∞–º–ø–∞–Ω—Å–∫–æ–µ</span>
      <span class="csub">–ò–≥—Ä–∏—Å—Ç–æ–µ</span>
    </span>
  </label>

  <label class="choice">
    <input type="checkbox" name="alcohol" value="strong">
    <span class="dot"></span>
    <span class="ctext">
      <span class="ctitle">–ö—Ä–µ–ø–∫–∏–π –∞–ª–∫–æ–≥–æ–ª—å</span>
      <span class="csub">–ù–∞–ø—Ä–∏–º–µ—Ä: –≤–∏—Å–∫–∏/–≤–æ–¥–∫–∞</span>
    </span>
  </label>

  <label class="choice">
    <input type="checkbox" name="alcohol" value="no">
    <span class="dot"></span>
    <span class="ctext">
      <span class="ctitle">–ù–µ —É–ø–æ—Ç—Ä–µ–±–ª—è—é</span>
      <span class="csub">–ë–µ–∑ –∞–ª–∫–æ–≥–æ–ª—è</span>
    </span>
  </label>
</div>
            <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π / –ø–æ–∂–µ–ª–∞–Ω–∏—è</label>
            <textarea name="comment" placeholder="–ê–ª–ª–µ—Ä–≥–∏–∏/–ø–∏—Ç–∞–Ω–∏–µ/–ø—Ä–æ—á–µ–µ‚Ä¶"></textarea>

            <button class="btn" id="guestSendBtn" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ—Å—Ç—è</button>
            <div class="ok" id="guestOk">–ì–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω.</div>
            <div class="err" id="guestErr">–ù–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.</div>
          </form>
        </div>

        <!-- –®–∞–≥ 4: –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≥–æ—Å—Ç—è ‚Äî —Å–Ω–æ–≤–∞ —Å–ø—Ä–æ—Å–∏—Ç—å -->
        <div class="block" id="stepAskAfterGuest" style="display:none;">
          <div class="tag">–ï—â—ë –≥–æ—Å—Ç–∏?</div>
          <p class="sub" style="margin:0;">–î–æ–±–∞–≤–∏—Ç—å –µ—â—ë –æ–¥–Ω–æ–≥–æ –≥–æ—Å—Ç—è –∏–ª–∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å?</p>
          <div class="inlineBtns">
            <button class="btn" id="addMoreBtn" type="button">–î–æ–±–∞–≤–∏—Ç—å –µ—â—ë</button>
            <button class="btn" id="finishBtn2" type="button">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
          </div>
        </div>

        <!-- –§–∏–Ω–∞–ª -->
        <div class="block" id="stepDone" style="display:none;">
          <div class="tag">–ì–æ—Ç–æ–≤–æ</div>
          <p class="sub" style="margin:0;">–°–ø–∞—Å–∏–±–æ! –ú—ã –ø–æ–ª—É—á–∏–ª–∏ –≤–∞—à –æ—Ç–≤–µ—Ç üíõ</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // –í—Å—Ç–∞–≤—å Web App URL Apps Script (–∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ /exec)
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwBrwtxJ0hSFTO5kOIn5KjSs42AapOU-eU8INyykdzUkL5OPMnaXqSyAe8fupHc_8gJPA/exec";

    // —à–∞–≥–∏
    const stepMain = document.getElementById("stepMain");
    const stepAsk = document.getElementById("stepAsk");
    const stepGuest = document.getElementById("stepGuest");
    const stepAskAfterGuest = document.getElementById("stepAskAfterGuest");
    const stepDone = document.getElementById("stepDone");

    // —Ñ–æ—Ä–º—ã
    const mainForm = document.getElementById("mainForm");
    const guestForm = document.getElementById("guestForm");

    // –∫–Ω–æ–ø–∫–∏
    const addGuestBtn = document.getElementById("addGuestBtn");
    const finishBtn1 = document.getElementById("finishBtn1");
    const addMoreBtn = document.getElementById("addMoreBtn");
    const finishBtn2 = document.getElementById("finishBtn2");

    const mainSendBtn = document.getElementById("mainSendBtn");
    const guestSendBtn = document.getElementById("guestSendBtn");

    // —Å–æ–æ–±—â–µ–Ω–∏—è
    const mainOk = document.getElementById("mainOk");
    const mainErr = document.getElementById("mainErr");
    const guestOk = document.getElementById("guestOk");
    const guestErr = document.getElementById("guestErr");

    const guestTag = document.getElementById("guestTag");

    // group_id —Å–≤—è–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏
    let groupId = null;
    let guestCount = 0;

    function makeGroupId(){
      return "g_" + Date.now().toString(36) + "_" + Math.random().toString(36).slice(2, 8);
    }

    async function postRSVP(payload){
      const res = await fetch(SCRIPT_URL, {
        method: "POST",
        headers: { "Content-Type": "text/plain;charset=utf-8" },
        body: JSON.stringify(payload),
      });
      const json = await res.json().catch(() => ({}));
      return { ok: res.ok && json.ok, json };
    }

    function show(el){ el.style.display = ""; }
    function hide(el){ el.style.display = "none"; }

    // helper: form -> object
    function formToObj(form){
      return Object.fromEntries(new FormData(form).entries());
    }

    // 1) –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –≥–æ—Å—Ç—è
    mainForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      mainOk.style.display = "none";
      mainErr.style.display = "none";

      const data = formToObj(mainForm);
      groupId = makeGroupId();

      mainSendBtn.disabled = true;
      mainSendBtn.textContent = "–û—Ç–ø—Ä–∞–≤–ª—è–µ–º‚Ä¶";

      try {
        const r = await postRSVP({ group_id: groupId, role: "main", ...data });
        if (r.ok) {
          mainOk.style.display = "block";
          setTimeout(() => { hide(stepMain); show(stepAsk); }, 450);
        } else mainErr.style.display = "block";
      } catch (err) {
        mainErr.style.display = "block";
      } finally {
        mainSendBtn.disabled = false;
        mainSendBtn.textContent = "–û—Ç–ø—Ä–∞–≤–∏—Ç—å";
      }
    });

    // 2) –ø–æ—Å–ª–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ: –¥–æ–±–∞–≤–∏—Ç—å –≥–æ—Å—Ç—è / –∑–∞–≤–µ—Ä—à–∏—Ç—å
    addGuestBtn.addEventListener("click", () => {
      guestCount = 0;
      guestTag.textContent = "–ì–æ—Å—Ç—å 1";
      guestForm.reset();
      guestOk.style.display = "none";
      guestErr.style.display = "none";
      hide(stepAsk);
      show(stepGuest);
    });

    finishBtn1.addEventListener("click", () => {
      hide(stepAsk);
      show(stepDone);
    });

    // 3) –æ—Ç–ø—Ä–∞–≤–∫–∞ –≥–æ—Å—Ç—è
    guestForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      guestOk.style.display = "none";
      guestErr.style.display = "none";

      const data = formToObj(guestForm);

      guestSendBtn.disabled = true;
      guestSendBtn.textContent = "–û—Ç–ø—Ä–∞–≤–ª—è–µ–º‚Ä¶";

      try {
        guestCount += 1;
        const r = await postRSVP({
          group_id: groupId || makeGroupId(),
          role: "guest",
          ...data
        });

        if (r.ok) {
          guestOk.style.display = "block";
          // –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –≥–æ—Å—Ç—è ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–µ–º, —á—Ç–æ –¥–∞–ª—å—à–µ
          setTimeout(() => {
            hide(stepGuest);
            show(stepAskAfterGuest);
          }, 450);
        } else {
          // –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Äî –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫, —á—Ç–æ–±—ã –Ω–æ–º–µ—Ä –Ω–µ –ø—Ä—ã–≥–∞–ª
          guestCount -= 1;
          guestErr.style.display = "block";
        }
      } catch (err) {
        guestCount -= 1;
        guestErr.style.display = "block";
      } finally {
        guestSendBtn.disabled = false;
        guestSendBtn.textContent = "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ—Å—Ç—è";
      }
    });

    // 4) –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≥–æ—Å—Ç—è: –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë / –∑–∞–≤–µ—Ä—à–∏—Ç—å
    addMoreBtn.addEventListener("click", () => {
      hide(stepAskAfterGuest);
      show(stepGuest);

      // –≥–æ—Ç–æ–≤–∏–º —Ñ–æ—Ä–º—É —Å–ª–µ–¥—É—é—â–µ–≥–æ –≥–æ—Å—Ç—è
      guestTag.textContent = "–ì–æ—Å—Ç—å " + (guestCount + 1);
      guestForm.reset();
      guestOk.style.display = "none";
      guestErr.style.display = "none";
    });

    finishBtn2.addEventListener("click", () => {
      hide(stepAskAfterGuest);
      show(stepDone);
    });
  </script>
</body>
</html>
